<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Learn how to configure Google Sheets and GitHub for Kyber.
">
<title>Configuring Google Sheets and GitHub for Kyber • kyber</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Configuring Google Sheets and GitHub for Kyber">
<meta property="og:description" content="Learn how to configure Google Sheets and GitHub for Kyber.
">
<meta property="og:image" content="https://openscapes.github.io/kyber/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">kyber</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/quick-cohort-setup.html">Quick Cohort Setup</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Configuring Google Sheets and GitHub for Kyber</h1>
            
      
      
      <div class="d-none name"><code>configuration.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The main purpose of Kyber is to automate common tasks that need to be
done before the start of an Openscapes Champions Cohort. This level of
automation requires that you authorize your computer with Google Sheets
and with GitHub.</p>
</div>
<div class="section level2">
<h2 id="configuring-google-sheets">Configuring Google Sheets<a class="anchor" aria-label="anchor" href="#configuring-google-sheets"></a>
</h2>
<p>Kyber interacts with Google Sheets via the <code>googlesheets4</code>
package. This package makes it easy to authorize your computer so that
Kyber can access Google Sheets programmatically. Run the following code
to configure <code>googlesheets4</code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://googlesheets4.tidyverse.org" class="external-link">googlesheets4</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://googlesheets4.tidyverse.org/reference/gs4_auth.html" class="external-link">gs4_auth</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This function should redirect you to a web browser where you can log
in with your Google account. After you have authorized
<code>googlesheets4</code>, you can confirm that it is configured
correctly by running the following:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://googlesheets4.tidyverse.org/reference/gs4_user.html" class="external-link">gs4_user</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Logged in to googlesheets4 as your-name@email.com.</span></span></code></pre></div>
<p>For more detailed information, see the <a href="https://googlesheets4.tidyverse.org/reference/gs4_auth.html" class="external-link"><code>gs4_auth()</code>
documentation</a> and the <code>googlesheets4</code> authorization <a href="https://googlesheets4.tidyverse.org/articles/auth.html" class="external-link">troubleshooting
documentation</a>.</p>
<div class="section level3">
<h3 id="troubelshooting-google-sheets">Troubelshooting Google Sheets<a class="anchor" aria-label="anchor" href="#troubelshooting-google-sheets"></a>
</h3>
<p>If you have not authorized your computer to use
<code>googlesheets4</code> in a while you may see the following
error:</p>
<pre><code>The googlesheets4 package is requesting access to your Google account.
Select a pre-authorised account or enter '0' to obtain a new token.
Press Esc/Ctrl + C to cancel.

1: username@email.com

Selection: 1
Auto-refreshing stale OAuth token.
Error in `gargle_abort_request_failed()`:
! Client error: (403) PERMISSION_DENIED
...</code></pre>
<p>We have had success troubleshooting this error with the following
method. First, try reading a Google Sheet into R:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://googlesheets4.tidyverse.org" class="external-link">googlesheets4</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">cohort_registry_url</span> <span class="op">&lt;-</span> <span class="st">"https://docs.google.com/spreadsheets/sheet-url..."</span></span>
<span></span>
<span><span class="fu"><a href="https://googlesheets4.tidyverse.org/reference/range_read.html" class="external-link">read_sheet</a></span><span class="op">(</span><span class="va">cohort_registry_url</span><span class="op">)</span></span></code></pre></div>
<p>You should see the following prompt:</p>
<pre><code>Selection: </code></pre>
<p>Enter <code>0</code> then press the Enter key. You computer’s browser
should launch and load Google’s authorization page. Reauthorize your
account via the web browser and you should see the following message in
the R console:</p>
<pre><code>Waiting for authentication in browser...
Press Esc/Ctrl + C to abort
Authentication complete.</code></pre>
</div>
</div>
<div class="section level2">
<h2 id="configuring-git-and-github">Configuring Git and GitHub<a class="anchor" aria-label="anchor" href="#configuring-git-and-github"></a>
</h2>
<p>One of the main purposes of Kyber is to automate processes that
people would normally do “by hand.” By authorizing Kyber with your
GitHub account, you are allowing Kyber to act “as you” on GitHub.</p>
<p>🚨 A word of caution: take care in using Kyber functions that
interact with GitHub. Kyber is designed so that you cannot delete things
on GitHub with Kyber, however if you are determined you could use Kyber
to make a big mess. If you are going to write your own code or functions
that use Kyber, try to avoid using Kyber within any code that is
designed to iterate or execute multiple commands. This includes
<code>for</code> and <code>while</code> loops, and mapping functions
like <code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply()</a></code> and <code><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">purrr::map()</a></code>.</p>
<div class="section level3">
<h3 id="configuring-git">Configuring Git<a class="anchor" aria-label="anchor" href="#configuring-git"></a>
</h3>
<p>Make sure that you have Git installed on your computer. If you need
to install Git you can find instructions specific to your operating
system from the online <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git" class="external-link">Git
documentation</a> or from this <a href="https://github.com/git-guides/install-git" class="external-link">GitHub guide</a>.</p>
</div>
<div class="section level3">
<h3 id="configuring-github">Configuring GitHub<a class="anchor" aria-label="anchor" href="#configuring-github"></a>
</h3>
<p>To get started configuring GitHub, first make sure that you have a <a href="https://github.com/" class="external-link">GitHub</a> account and that you are logged
in. Take note of the GitHub username that you choose and the email
address that you use to sign up for GitHub.</p>
<p>After installing Git, make sure to install the Gert package, which
Kyber uses to interact with Git. If you have freshly installed Git, you
should use Gert to set your GitHub username and email address locally
with the following code:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/gert/" class="external-link">gert</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/gert/reference/git_config.html" class="external-link">git_config_global_set</a></span><span class="op">(</span><span class="st">"user.name"</span>, <span class="st">"[your GitHub username]"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/gert/reference/git_config.html" class="external-link">git_config_global_set</a></span><span class="op">(</span><span class="st">"user.email"</span>, <span class="st">"[the email you used to sign up for GitHub]"</span><span class="op">)</span></span></code></pre></div>
<p>Confirm your configuration was set correctly by running:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://docs.ropensci.org/gert/reference/git_config.html" class="external-link">git_config_global</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Now that you have configured your GitHub username and email address
with Git, you need to use GitHub to generate a token that Kyber will use
to connect to your GitHub account. Keeping this token private is
extremely important, since anyone with this token can act as you on
GitHub. There’s no need to save this token however, you just need to
copy and paste it into the R console once. Run the code below, which
will open up your web browser to a page on GitHub with the appropriate
settings for this token already selected. After you execute the code
below, scroll to the bottom of the page and click the green “Generate
token” button.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://usethis.r-lib.org" class="external-link">usethis</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://usethis.r-lib.org/reference/github-token.html" class="external-link">create_github_token</a></span><span class="op">(</span></span>
<span>  scopes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"repo"</span>, <span class="st">"user"</span>, <span class="st">"gist"</span>, <span class="st">"workflow"</span>, <span class="st">"admin:org"</span><span class="op">)</span>, </span>
<span>  description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"kyber-"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">•</span> Call <span style="color: #555555;">`gitcreds::gitcreds_set()`</span> to register this token in the local Git credential store</span></span>
<span><span class="co">#&gt;   It is also a great idea to store this token in any password-management software that you use</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">•</span> Open URL <span style="color: #0000BB;">'https://github.com/settings/tokens/new?scopes=repo,user,gist,workflow,admin:org&amp;description=kyber-2023-04-22'</span></span></span></code></pre></div>
<p>The token should appear as a string with about 40 random alphanumeric
characters that start with <code>ghp_</code>. Copy the string from
GitHub before running the code below. You will be prompted to enter the
token into the R console:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gitcreds.r-lib.org/" class="external-link">gitcreds</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://gitcreds.r-lib.org/reference/gitcreds_get.html" class="external-link">gitcreds_set</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>? Enter password or token: </code></pre>
<p>Paste your token into the R console and press Enter, then you should
see:</p>
<pre><code>-&gt; Adding new credentials...
-&gt; Removing credentials from cache...
-&gt; Done.</code></pre>
<p>You can check to make sure that you credentials are set up by
running:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://gitcreds.r-lib.org/reference/gitcreds_get.html" class="external-link">gitcreds_get</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>&lt;gitcreds&gt;
  protocol: https
  host    : github.com
  username: PersonalAccessToken
  password: &lt;-- hidden --&gt;</code></pre>
<p>Everything should now be configured for you to start using Kyber.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Sean Kross, Julia Lowndes.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
